# Environment Configuration Example for Hokusai Contract Deployer

# Application Configuration
NODE_ENV=development
PORT=8002
LOG_LEVEL=info

# AWS/SSM Configuration (for production deployment)
USE_SSM=false
AWS_REGION=us-east-1
DEPLOY_ENV=development

# Blockchain Configuration
RPC_URL=https://ethereum-rpc-url.com
CHAIN_ID=1
NETWORK_NAME=mainnet

# Contract Addresses (replace with actual deployed addresses)
MODEL_REGISTRY_ADDRESS=0x1234567890123456789012345678901234567890
TOKEN_MANAGER_ADDRESS=0x0987654321098765432109876543210987654321

# Private Keys (keep secure, use environment variables in production)
DEPLOYER_PRIVATE_KEY=0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef12

# Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_KEY_PREFIX=hokusai:deployer:

# Queue Configuration
QUEUE_NAME=contract-deployments
MAX_RETRIES=3
RETRY_DELAY_MS=5000

# Gas Configuration
GAS_PRICE_MULTIPLIER=1.2
MAX_GAS_PRICE_GWEI=100
GAS_LIMIT_MULTIPLIER=1.5

# Monitoring (Existing Health Check)
HEALTH_CHECK_INTERVAL_MS=30000
METRICS_ENABLED=true

# AMM Monitoring Configuration
# Network (determines which deployment artifact to load)
NETWORK=mainnet                           # or sepolia for testing

# RPC Configuration
MAINNET_RPC_URL=https://eth-mainnet.alchemyapi.io/v2/YOUR_API_KEY
SEPOLIA_RPC_URL=https://eth-sepolia.g.alchemy.com/v2/YOUR_API_KEY
BACKUP_RPC_URL=https://mainnet.infura.io/v3/YOUR_INFURA_KEY

# Monitoring Toggles
MONITORING_ENABLED=true                   # Master switch for AMM monitoring
POOL_DISCOVERY_ENABLED=true               # Auto-discover new pools
EVENT_LISTENERS_ENABLED=true              # Listen for Buy/Sell/Pause events
STATE_POLLING_ENABLED=true                # Poll pool state every 12s
ALERTS_ENABLED=true                       # Send alerts via email

# Monitoring Intervals
MONITORING_INTERVAL_MS=120000             # State polling interval (120s = 10 blocks, optimized for cost)
MONITORING_START_BLOCK=latest             # Start from 'latest' or specific block number

# Alert Configuration (Phase 2)
ALERT_EMAIL=me@timogilvie.com             # Email for alerts
ALERT_EMAIL_FROM=alerts@hokus.ai          # From email address (must be verified in AWS SES)
AWS_SES_REGION=us-east-1                  # AWS SES region

# Alert Rate Limiting
MAX_ALERTS_PER_HOUR=10                    # Max alerts per hour per alert type
MAX_ALERTS_PER_DAY=50                     # Max alerts per day per alert type
ALERT_DEDUP_WINDOW_MS=300000              # Deduplication window (5 minutes = 300000ms)

# Alert Thresholds (customize based on pool volatility)
ALERT_RESERVE_DROP_PCT=20                 # Alert if reserve drops >20% in 1h
ALERT_PRICE_CHANGE_1H_PCT=20              # Alert if price changes >20% in 1h
ALERT_PRICE_CHANGE_24H_PCT=50             # Alert if price changes >50% in 24h
ALERT_LARGE_TRADE_USD=10000               # Alert on trades >$10,000
ALERT_RESERVE_MIN_USD=1000                # Alert if reserve <$1,000
ALERT_SUPPLY_CHANGE_1H_PCT=15             # Alert if supply changes >15% in 1h
ALERT_HIGH_GAS_GWEI=200                   # Warning if gas >200 Gwei
ALERT_EXTREME_GAS_GWEI=500                # Critical if gas >500 Gwei
ALERT_TREASURY_FEES_USD=50000             # Alert if treasury fees >$50,000
ALERT_IBR_ENDING_HOURS=24                 # Alert 24h before IBR ends
ALERT_PAUSED_DURATION_HOURS=1             # Alert if paused >1 hour

# CloudWatch Configuration (Phase 4)
AWS_CLOUDWATCH_NAMESPACE=Hokusai/AMM      # CloudWatch namespace
AWS_CLOUDWATCH_ENABLED=false              # Enable CloudWatch metrics (Phase 4)

# API Configuration
# For simple API key authentication (temporary) - will be loaded from SSM in production
VALID_API_KEYS=dev-key-1,dev-key-2,admin-key
# For JWT authentication (future) - will be loaded from SSM in production  
JWT_SECRET=your-secret-key-here

# Rate Limiting
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# Deployment Configuration
CONFIRMATION_BLOCKS=3
DEPLOYMENT_TIMEOUT_MS=300000

# External Services (optional)
WEBHOOK_URL=https://api.example.com/webhooks/deployment
WEBHOOK_SECRET=webhook-secret-key

# CORS Configuration (optional)
ALLOWED_ORIGINS=http://localhost:3000,https://app.hokusai.io

# Legacy Configuration (for backward compatibility with existing service)
REDIS_URL=redis://localhost:6379
RPC_URLS=http://localhost:8545,https://polygon-rpc.com
GAS_MULTIPLIER=1.2
MAX_GAS_PRICE=100000000000
CONFIRMATIONS=2
INBOUND_QUEUE=hokusai:model_ready_queue
OUTBOUND_QUEUE=hokusai:token_deployed_queue
PROCESSING_QUEUE=hokusai:processing_queue
DLQ_NAME=hokusai:dlq